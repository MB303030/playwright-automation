name: Professional Tag

on:
  workflow_dispatch:
    inputs:
      test_type:
        description: 'üéØ What type of tests to run?'
        required: true
        type: choice
        options:
        - Web Tests
        - Mobile Tests
        - Performance Tests
        - All Tests
      test_suite:
        description: 'üìÇ Which test suite?'
        required: false
        type: choice
        options:
        - Smoke
        - Sanity
        - Regression
        - Negative
        - All
        default: 'All'
      browser:
        description: 'üåê Browser to use'
        required: true
        type: choice
        options:
        - chrome
        - firefox
        - webkit
        default: 'chrome'
      environment:
        description: 'üè¢ Test environment'
        required: false
        type: choice
        options:
        - Development
        - Staging
        - Production
        - Custom
        default: 'Staging'
      custom_tags:
        description: 'üè∑Ô∏è Custom tags (comma-separated, e.g., @smoke,@critical)'
        required: false
        default: ''
      priority:
        description: 'üéØ Test priority'
        required: false
        type: choice
        options:
        - P0-Critical
        - P1-High
        - P2-Medium
        - P3-Low
        default: 'P1-High'

env:
  CI: true
  FORCE_COLOR: 1

jobs:
  run-professional-tests:
    timeout-minutes: 60
    runs-on: ubuntu-latest
    name: üß™ ${{ github.event.inputs.test_type }} (${{ github.event.inputs.browser }})
    
    steps:
    - name: üì• Checkout repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    
    - name: ‚öôÔ∏è Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: üì¶ Install dependencies
      run: |
        npm ci
        npx playwright install --with-deps ${{ github.event.inputs.browser }}
    
    - name: üéØ Configure Test Run
      id: config
      run: |
        # Determine test path
        TEST_TYPE="${{ github.event.inputs.test_type }}"
        TEST_SUITE="${{ github.event.inputs.test_suite }}"
        BROWSER="${{ github.event.inputs.browser }}"
        ENV="${{ github.event.inputs.environment }}"
        TAGS="${{ github.event.inputs.custom_tags }}"
        PRIORITY="${{ github.event.inputs.priority }}"
        
        # Set base path
        if [ "$TEST_TYPE" = "Web Tests" ]; then
          BASE_PATH="./tests/web"
        elif [ "$TEST_TYPE" = "Mobile Tests" ]; then
          BASE_PATH="./tests/mobile"
        elif [ "$TEST_TYPE" = "Performance Tests" ]; then
          BASE_PATH="./tests/performance"
        else
          BASE_PATH="."
        fi
        
        # Set specific suite path
        if [ "$TEST_SUITE" != "All" ] && [ "$TEST_TYPE" != "Performance Tests" ]; then
          TEST_PATH="$BASE_PATH/$TEST_SUITE"
        else
          TEST_PATH="$BASE_PATH"
        fi
        
        # Create run identifier
        RUN_ID="run_$(date +%Y%m%d_%H%M%S)"
        REPORT_NAME="${TEST_TYPE// /_}_${TEST_SUITE}_${BROWSER}_${ENV}_${PRIORITY}_${RUN_ID}"
        
        echo "TEST_PATH=$TEST_PATH" >> $GITHUB_OUTPUT
        echo "REPORT_NAME=$REPORT_NAME" >> $GITHUB_OUTPUT
        echo "RUN_ID=$RUN_ID" >> $GITHUB_OUTPUT
        
        echo "‚úÖ Configuration Complete"
        echo "   Path: $TEST_PATH"
        echo "   Report: $REPORT_NAME"
        echo "   Browser: $BROWSER"
        echo "   Environment: $ENV"
        echo "   Priority: $PRIORITY"
        echo "   Tags: $TAGS"
    
    - name: üèÉ Execute Tests
      id: execute-tests
      run: |
        # Build command
        CMD="npx playwright test \"${{ steps.config.outputs.TEST_PATH }}\""
        
        # Add core options
        CMD="$CMD --project=${{ github.event.inputs.browser }}"
        CMD="$CMD --reporter=html,allure-playwright,json"
        CMD="$CMD --retries=2"
        CMD="$CMD --timeout=90000"
        CMD="$CMD --trace=on"
        CMD="$CMD --video=on"
        CMD="$CMD --screenshot=on"
        
        # Add tags if specified
        if [ -n "${{ github.event.inputs.custom_tags }}" ]; then
          TAGS=$(echo "${{ github.event.inputs.custom_tags }}" | tr ',' '|')
          CMD="$CMD --grep=\"($TAGS)\""
        fi
        
        # Set workers
        if [ "${{ github.event.inputs.test_type }}" = "Performance Tests" ]; then
          CMD="$CMD --workers=1"
        elif [ "${{ github.event.inputs.test_type }}" = "Mobile Tests" ]; then
          CMD="$CMD --workers=2"
        else
          CMD="$CMD --workers=4"
        fi
        
        echo "üöÄ Running: $CMD"
        echo "========================================"
        
        # Execute with timestamp
        start_time=$(date +%s)
        eval $CMD
        EXIT_CODE=$?
        end_time=$(date +%s)
        
        # Calculate duration
        duration=$((end_time - start_time))
        
        echo "EXIT_CODE=$EXIT_CODE" >> $GITHUB_OUTPUT
        echo "DURATION=$duration" >> $GITHUB_OUTPUT
        echo "========================================"
        echo "‚è±Ô∏è  Execution time: $duration seconds"
        
        exit $EXIT_CODE
    
    - name: üìä Generate Professional Reports
      if: always()
      run: |
        # Create reports directory
        mkdir -p ./reports/${{ steps.config.outputs.REPORT_NAME }}
        
        # Generate Allure report
        echo "üìà Generating Allure Report..."
        npx allure generate allure-results --clean -o ./reports/${{ steps.config.outputs.REPORT_NAME }}/allure-report
        
        # Copy Playwright report
        echo "üé® Copying Playwright HTML Report..."
        cp -r playwright-report/* ./reports/${{ steps.config.outputs.REPORT_NAME }}/ 2>/dev/null || true
        
        # Create professional HTML dashboard
        echo "üñ•Ô∏è  Creating Professional Dashboard..."
        cat > ./reports/${{ steps.config.outputs.REPORT_NAME }}/dashboard.html << 'EOF'
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Test Execution Dashboard - ${{ github.event.inputs.test_type }}</title>
            <script src="https://cdn.tailwindcss.com"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <style>
                body { font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; }
                .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
                .stat-card { transition: all 0.3s ease; }
                .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
                .test-case { border-left: 4px solid; }
                .passed { border-color: #10b981; }
                .failed { border-color: #ef4444; }
                .skipped { border-color: #f59e0b; }
                .flaky { border-color: #8b5cf6; }
            </style>
        </head>
        <body class="bg-gray-50">
            <div class="min-h-screen">
                <!-- Header -->
                <header class="gradient-bg text-white shadow-lg">
                    <div class="container mx-auto px-4 py-8">
                        <div class="flex flex-col md:flex-row justify-between items-center">
                            <div>
                                <h1 class="text-3xl font-bold mb-2">üß™ Test Execution Dashboard</h1>
                                <p class="text-blue-100">Professional Test Results Analysis</p>
                            </div>
                            <div class="mt-4 md:mt-0">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-purple-800 mr-2">
                                    <i class="fas fa-calendar-alt mr-2"></i>$(date '+%Y-%m-%d')
                                </span>
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-purple-800">
                                    <i class="fas fa-clock mr-2"></i>$(date '+%H:%M:%S')
                                </span>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Summary Cards -->
                <section class="container mx-auto px-4 py-8 -mt-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-green-100 text-green-600 mr-4">
                                    <i class="fas fa-check-circle text-2xl"></i>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Total Tests</p>
                                    <p class="text-3xl font-bold">--</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-red-100 text-red-600 mr-4">
                                    <i class="fas fa-times-circle text-2xl"></i>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Failed Tests</p>
                                    <p class="text-3xl font-bold">--</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-blue-100 text-blue-600 mr-4">
                                    <i class="fas fa-clock text-2xl"></i>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Duration</p>
                                    <p class="text-3xl font-bold">${{ steps.execute-tests.outputs.DURATION }}s</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-purple-100 text-purple-600 mr-4">
                                    <i class="fas fa-tachometer-alt text-2xl"></i>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Success Rate</p>
                                    <p class="text-3xl font-bold">--%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Test Info -->
                <section class="container mx-auto px-4 py-6">
                    <div class="bg-white rounded-xl shadow p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-info-circle mr-2 text-blue-500"></i> Test Run Information
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div>
                                <p class="text-gray-500 text-sm">Test Type</p>
                                <p class="font-medium">${{ github.event.inputs.test_type }}</p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-sm">Test Suite</p>
                                <p class="font-medium">${{ github.event.inputs.test_suite }}</p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-sm">Browser</p>
                                <p class="font-medium">
                                    <i class="fab fa-${{ github.event.inputs.browser == 'chrome' && 'chrome' || github.event.inputs.browser == 'firefox' && 'firefox' || 'safari' }} mr-2"></i>
                                    ${{ github.event.inputs.browser }}
                                </p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-sm">Environment</p>
                                <p class="font-medium">${{ github.event.inputs.environment }}</p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-sm">Priority</p>
                                <p class="font-medium">${{ github.event.inputs.priority }}</p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-sm">Triggered By</p>
                                <p class="font-medium">${{ github.actor }}</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Charts -->
                <section class="container mx-auto px-4 py-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Results Distribution</h3>
                            <div class="h-64">
                                <canvas id="resultsChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Execution Timeline</h3>
                            <div class="h-64">
                                <canvas id="timelineChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Quick Links -->
                <section class="container mx-auto px-4 py-6">
                    <div class="bg-white rounded-xl shadow p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-external-link-alt mr-2 text-green-500"></i> Detailed Reports
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <a href="playwright-report/index.html" 
                               class="flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition">
                                <div class="p-3 rounded-lg bg-blue-100 text-blue-600 mr-4">
                                    <i class="fas fa-file-code text-2xl"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-blue-800">Playwright Report</p>
                                    <p class="text-sm text-blue-600">Interactive HTML report with videos & traces</p>
                                </div>
                            </a>
                            
                            <a href="allure-report/index.html"
                               class="flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition">
                                <div class="p-3 rounded-lg bg-purple-100 text-purple-600 mr-4">
                                    <i class="fas fa-chart-line text-2xl"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-purple-800">Allure Report</p>
                                    <p class="text-sm text-purple-600">Detailed analytics and trends</p>
                                </div>
                            </a>
                            
                            <a href="#"
                               class="flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition">
                                <div class="p-3 rounded-lg bg-green-100 text-green-600 mr-4">
                                    <i class="fas fa-download text-2xl"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-green-800">Download Artifacts</p>
                                    <p class="text-sm text-green-600">Screenshots, videos, and trace files</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </section>

                <!-- Footer -->
                <footer class="mt-12 py-6 bg-gray-800 text-white">
                    <div class="container mx-auto px-4 text-center">
                        <p class="text-gray-400">Generated by Professional Test Runner ‚Ä¢ Powered by Playwright & Allure</p>
                        <p class="text-sm text-gray-500 mt-2">Run ID: ${{ steps.config.outputs.RUN_ID }}</p>
                    </div>
                </footer>
            </div>

            <script>
                // Sample chart data
                const resultsChart = new Chart(
                    document.getElementById('resultsChart'),
                    {
                        type: 'doughnut',
                        data: {
                            labels: ['Passed', 'Failed', 'Skipped', 'Flaky'],
                            datasets: [{
                                data: [85, 10, 3, 2],
                                backgroundColor: [
                                    '#10b981',
                                    '#ef4444',
                                    '#f59e0b',
                                    '#8b5cf6'
                                ],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    }
                );

                // Timeline chart
                const timelineChart = new Chart(
                    document.getElementById('timelineChart'),
                    {
                        type: 'line',
                        data: {
                            labels: ['Start', '25%', '50%', '75%', 'Complete'],
                            datasets: [{
                                label: 'Test Execution',
                                data: [0, 20, 50, 80, 100],
                                borderColor: '#667eea',
                                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                tension: 0.3,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100,
                                    ticks: {
                                        callback: function(value) {
                                            return value + '%';
                                        }
                                    }
                                }
                            }
                        }
                    }
                );
            </script>
        </body>
        </html>
        EOF
        
        echo "‚úÖ Professional reports generated!"
    
    - name: üìÑ Generate Detailed Markdown Summary
      if: always()
      run: |
        echo "# üìã Test Execution Summary" > ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        
        echo "## üéØ Test Configuration" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Test Type:** ${{ github.event.inputs.test_type }}" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Test Suite:** ${{ github.event.inputs.test_suite }}" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Browser:** ${{ github.event.inputs.browser }}" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Environment:** ${{ github.event.inputs.environment }}" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Priority:** ${{ github.event.inputs.priority }}" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Triggered By:** ${{ github.actor }}" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Run ID:** ${{ steps.config.outputs.RUN_ID }}" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Execution Time:** ${{ steps.execute-tests.outputs.DURATION }} seconds" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        
        echo "## üìä Execution Results" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "| Status | Count | Percentage |" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "|--------|-------|------------|" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "| ‚úÖ Passed | -- | -- |" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "| ‚ùå Failed | -- | -- |" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "| ‚ö†Ô∏è Skipped | -- | -- |" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "| üîÑ Flaky | -- | -- |" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        
        echo "## üìÅ Generated Reports" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "1. **[Professional Dashboard](dashboard.html)** - Main dashboard with charts and statistics" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "2. **[Playwright Report](playwright-report/index.html)** - Interactive HTML report with videos and traces" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "3. **[Allure Report](allure-report/index.html)** - Detailed analytics and historical trends" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "4. **[Test Artifacts](./)** - Raw test results, screenshots, videos, and trace files" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        
        echo "## üìà Test Coverage" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Total Test Cases:** --" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Test Path:** \`${{ steps.config.outputs.TEST_PATH }}\`" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "- **Execution Date:** $(date)" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        
        echo "---" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
        echo "*Report generated by Professional Test Runner v1.0*" >> ./reports/${{ steps.config.outputs.REPORT_NAME }}/SUMMARY.md
    
    - name: üì§ Upload Professional Reports
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: professional-report-${{ steps.config.outputs.REPORT_NAME }}
        path: ./reports/${{ steps.config.outputs.REPORT_NAME }}/
        retention-days: 90
    
    - name: üì§ Upload Raw Test Results
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: raw-results-${{ steps.config.outputs.RUN_ID }}
        path: |
          test-results/
          allure-results/
          playwright-report/
        retention-days: 30
    
    - name: üì¢ Create GitHub Summary
      if: always()
      run: |
        echo "### üéâ Test Execution Complete!" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "**Configuration:**" >> $GITHUB_STEP_SUMMARY
        echo "- Test Type: ${{ github.event.inputs.test_type }}" >> $GITHUB_STEP_SUMMARY
        echo "- Test Suite: ${{ github.event.inputs.test_suite }}" >> $GITHUB_STEP_SUMMARY
        echo "- Browser: ${{ github.event.inputs.browser }}" >> $GITHUB_STEP_SUMMARY
        echo "- Environment: ${{ github.event.inputs.environment }}" >> $GITHUB_STEP_SUMMARY
        echo "- Priority: ${{ github.event.inputs.priority }}" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "**Execution Details:**" >> $GITHUB_STEP_SUMMARY
        echo "- Duration: ${{ steps.execute-tests.outputs.DURATION }} seconds" >> $GITHUB_STEP_SUMMARY
        echo "- Run ID: ${{ steps.config.outputs.RUN_ID }}" >> $GITHUB_STEP_SUMMARY
        echo "- Triggered By: ${{ github.actor }}" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "**üìä Reports Generated:**" >> $GITHUB_STEP_SUMMARY
        echo "1. **Professional Dashboard** - Interactive dashboard with charts and stats" >> $GITHUB_STEP_SUMMARY
        echo "2. **Playwright HTML Report** - With videos, screenshots, and traces" >> $GITHUB_STEP_SUMMARY
        echo "3. **Allure Report** - Detailed analytics and trends" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "üì• **Download reports from the Artifacts section**" >> $GITHUB_STEP_SUMMARY
    
    - name: üé® Post Results Comment
      if: always()
      uses: actions/github-script@v7
      with:
        script: |
          const summary = `
          ## üß™ Test Execution Complete!

          ### üìã Configuration
          | Parameter | Value |
          |-----------|-------|
          | Test Type | ${{ github.event.inputs.test_type }} |
          | Test Suite | ${{ github.event.inputs.test_suite }} |
          | Browser | ${{ github.event.inputs.browser }} |
          | Environment | ${{ github.event.inputs.environment }} |
          | Priority | ${{ github.event.inputs.priority }} |

          ### ‚è±Ô∏è Execution
          - **Duration:** ${{ steps.execute-tests.outputs.DURATION }} seconds
          - **Run ID:** ${{ steps.config.outputs.RUN_ID }}
          - **Triggered By:** ${{ github.actor }}

          ### üìä Reports Available
          1. **Professional Dashboard** - Interactive dashboard with charts
          2. **Playwright HTML Report** - With videos and traces
          3. **Allure Report** - Detailed analytics

          üì• **Download from Artifacts:** \`professional-report-${{ steps.config.outputs.REPORT_NAME }}\`

          ---
          *Generated by Professional Test Runner*
          `;
          
          github.rest.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: summary
          });
