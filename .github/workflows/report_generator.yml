name: Report Generator

on:
  workflow_call:
    inputs:
      test_type:
        required: true
        type: string
      test_suite:
        required: true
        type: string
      browser:
        required: true
        type: string
      environment:
        required: true
        type: string
      run_id:
        required: true
        type: string

jobs:
  generate_debug_report:
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Download Debug Info
        uses: actions/download-artifact@v4
        with:
          name: debug-info-${{ inputs.run_id }}
          path: ./downloaded-debug
        continue-on-error: true
      
      - name: ðŸ“Š Create Debug Summary
        run: |
          echo "## ðŸ› DEBUG EXECUTION SUMMARY" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Run Configuration:**" >> $GITHUB_STEP_SUMMARY
          echo "- Run ID: ${{ inputs.run_id }}" >> $GITHUB_STEP_SUMMARY
          echo "- Test Type: ${{ inputs.test_type }}" >> $GITHUB_STEP_SUMMARY
          echo "- Test Suite: ${{ inputs.test_suite }}" >> $GITHUB_STEP_SUMMARY
          echo "- Browser: ${{ inputs.browser }}" >> $GITHUB_STEP_SUMMARY
          echo "- Environment: ${{ inputs.environment }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          echo "**âš ï¸ NOTE:** This was a DEBUG run only!" >> $GITHUB_STEP_SUMMARY
          echo "No actual tests were executed." >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          if [ -d "./downloaded-debug" ]; then
            echo "**ðŸ“ Debug artifacts downloaded**" >> $GITHUB_STEP_SUMMARY
            echo "Check the 'debug-info-${{ inputs.run_id }}' artifact" >> $GITHUB_STEP_SUMMARY
          fi
